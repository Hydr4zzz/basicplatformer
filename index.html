<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Platformer 10 Fases + Chefe + Pausa</title>
<style>
  body, html {
    margin:0; padding:0; overflow:hidden; background:#222;
    font-family: sans-serif;
  }
  canvas {
    background: linear-gradient(to top, #6CCEFF, #FFFFFF);
    display: block;
    margin: 0 auto;
    border: 2px solid #555;
  }
  .controls {
    position: fixed;
    bottom: 10px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    gap: 10px;
    z-index: 10;
  }
  .btn {
    width: 60px;
    height: 60px;
    font-size: 26px;
    border-radius: 50%;
    border: none;
    background: rgba(255,255,255,0.9);
    color: #000;
    font-weight: bold;
    user-select:none;
  }
  #pauseBtn {
    position: fixed;
    top: 10px;
    right: 10px;
    width: 50px; height: 50px;
    font-size: 28px;
    background: rgba(255,255,255,0.8);
    border-radius: 10px;
    border:none;
    z-index: 10;
  }
  #hud {
    position: fixed;
    top: 10px;
    left: 10px;
    color: white;
    font-size: 18px;
    z-index: 10;
    user-select:none;
  }
  .screen {
    position: fixed;
    top: 0; left:0; width: 100%; height: 100%;
    background: rgba(0,0,0,0.85);
    color: white;
    font-size: 28px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    z-index: 100;
    user-select:none;
  }
  .screen button {
    margin-top: 20px;
    padding: 12px 24px;
    font-size: 20px;
    border-radius: 10px;
    border:none;
    cursor: pointer;
  }
</style>
</head>
<body>

<canvas id="gameCanvas" width="800" height="400"></canvas>

<div class="controls" id="controls">
  <button class="btn" id="left">‚óÄÔ∏è</button>
  <button class="btn" id="jump">‚¨ÜÔ∏è</button>
  <button class="btn" id="right">‚ñ∂Ô∏è</button>
</div>

<button id="pauseBtn">‚è∏Ô∏è</button>

<div id="hud">
  Tempo: <span id="time">0</span>s<br>
  Vida: <span id="lives">3</span><br>
  Moedas: <span id="coins">0</span><br>
  Fase: <span id="level">1</span>
</div>

<div id="startScreen" class="screen">
  <div>üéÆ Bem-vindo ao Platformer 10 Fases!</div>
  <button onclick="startGame()">Jogar</button>
</div>

<div id="pauseScreen" class="screen" style="display:none;">
  <div>‚è∏Ô∏è Pausado</div>
  <button onclick="resumeGame()">Continuar</button>
  <button onclick="exitToMenu()">Sair</button>
</div>

<div id="endScreen" class="screen" style="display:none;">
  <div id="endMessage"></div>
  <button onclick="restartGame()">Tentar Novamente</button>
  <button onclick="exitToMenu()">Sair para Menu</button>
</div>

<script>
(() => {
  const canvas = document.getElementById("gameCanvas");
  const ctx = canvas.getContext("2d");

  // HUD Elements
  const timeEl = document.getElementById("time");
  const livesEl = document.getElementById("lives");
  const coinsEl = document.getElementById("coins");
  const levelEl = document.getElementById("level");

  // Screens
  const startScreen = document.getElementById("startScreen");
  const pauseScreen = document.getElementById("pauseScreen");
  const endScreen = document.getElementById("endScreen");
  const endMessage = document.getElementById("endMessage");

  // Controls & pause button
  const controlsDiv = document.getElementById("controls");
  const pauseBtn = document.getElementById("pauseBtn");

  // Mobile buttons state
  const mobileKeys = { left: false, right: false, jump: false };

  // Game state
  let keys = {};
  let gameStarted = false;
  let gamePaused = false;
  let gameOver = false;
  let time = 0;
  let timerInterval;
  let currentLevel = 0;

  // Player
  const player = {
    x: 100,
    y: 0,
    width: 40,
    height: 40,
    dy: 0,
    speed: 4,
    jumpPower: -12,
    gravity: 0.6,
    grounded: false,
    lives: 3,
    coins: 0,
    sprite: new Image()
  };
  player.sprite.src = "https://i.imgur.com/NWlN5zv.png";

  // Coin
  const coinImg = new Image();
  coinImg.src = "https://i.imgur.com/abk9j7W.png";

  // Enemy sprite
  const enemyImg = new Image();
  enemyImg.src = "https://i.imgur.com/ULNnWYV.png";

  // Boss sprite
  const bossImg = new Image();
  bossImg.src = "https://i.imgur.com/UrwmtW7.png";

  // Sounds
  const jumpSound = new Audio("https://actions.google.com/sounds/v1/human_voices/human_grunt.ogg");
  const coinSound = new Audio("https://actions.google.com/sounds/v1/cartoon/pop.ogg");
  const hitSound = new Audio("https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg");
  const bossHitSound = new Audio("https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg");
  const music = new Audio("https://vgmsite.com/soundtracks/super-mario-bros/nfqmpakq/01%20-%20Ground%20Theme.mp3");
  music.loop = true;
  music.volume = 0.25;

  // Levels data: array de fases (plataformas, moedas, inimigos)
  // Plataformas: {x,y,width,height}
  // Moedas: {x,y,collected}
  // Inimigos: {x,y,width,height,dir,speed}
  // Fase 10 tem chefe especial
  const levels = [
    // Fase 1
    {
      platforms: [
        {x:0,y:360,width:800,height:40},
        {x:250,y:320,width:100,height:10},
        {x:400,y:280,width:100,height:10}
      ],
      coins: [
        {x:260,y:290,collected:false},
        {x:420,y:250,collected:false}
      ],
      enemies: [
        {x:350,y:330,width:30,height:30,dir:1,speed:1.2}
      ],
      boss: null
    },
    // Fase 2
    {
      platforms: [
        {x:0,y:360,width:800,height:40},
        {x:150,y:300,width:80,height:10},
        {x:350,y:260,width:120,height:10},
        {x:550,y:220,width:100,height:10}
      ],
      coins: [
        {x:160,y:270,collected:false},
        {x:370,y:230,collected:false},
        {x:560,y:190,collected:false}
      ],
      enemies: [
        {x:300,y:330,width:30,height:30,dir:1,speed:1.5},
        {x:580,y:190,width:30,height:30,dir:-1,speed:1}
      ],
      boss: null
    },
    // Fase 3
    {
      platforms: [
        {x:0,y:360,width:800,height:40},
        {x:200,y:310,width:70,height:10},
        {x:320,y:270,width:70,height:10},
        {x:440,y:230,width:70,height:10},
        {x:560,y:190,width:70,height:10}
      ],
      coins: [
        {x:210,y:280,collected:false},
        {x:330,y:240,collected:false},
        {x:450,y:200,collected:false},
        {x:570,y:160,collected:false}
      ],
      enemies: [
        {x:300,y:330,width:30,height:30,dir:1,speed:1.8},
        {x:500,y:330,width:30,height:30,dir:-1,speed:1.3}
      ],
      boss: null
    },
    // Fase 4
    {
      platforms: [
        {x:0,y:360,width:800,height:40},
        {x:100,y:300,width:60,height:10},
        {x:300,y:260,width:80,height:10},
        {x:500,y:220,width:90,height:10},
        {x:700,y:180,width:80,height:10}
      ],
      coins: [
        {x:110,y:270,collected:false},
        {x:310,y:230,collected:false},
        {x:510,y:190,collected:false},
        {x:710,y:150,collected:false}
      ],
      enemies: [
        {x:350,y:330,width:30,height:30,dir:1,speed:1.4},
        {x:600,y:330,width:30,height:30,dir:-1,speed:1.6}
      ],
      boss: null
    },
    // Fase 5
    {
      platforms: [
        {x:0,y:360,width:800,height:40},
        {x:150,y:320,width:100,height:10},
        {x:400,y:280,width:150,height:10},
        {x:650,y:240,width:80,height:10}
      ],
      coins: [
        {x:160,y:290,collected:false},
        {x:420,y:250,collected:false},
        {x:660,y:210,collected:false}
      ],
      enemies: [
        {x:300,y:330,width:30,height:30,dir:1,speed:1.7},
        {x:550,y:330,width:30,height:30,dir:-1,speed:1.4}
      ],
      boss: null
    },
    // Fase 6
    {
      platforms: [
        {x:0,y:360,width:800,height:40},
        {x:120,y:310,width:90,height:10},
        {x:320,y:270,width:90,height:10},
        {x:520,y:230,width:90,height:10},
        {x:720,y:190,width:80,height:10}
      ],
      coins: [
        {x:130,y:280,collected:false},
        {x:330,y:240,collected:false},
        {x:530,y:200,collected:false},
        {x:730,y:160,collected:false}
      ],
      enemies: [
        {x:350,y:330,width:30,height:30,dir:1,speed:1.5},
        {x:600,y:330,width:30,height:30,dir:-1,speed:1.6}
      ],
      boss: null
    },
    // Fase 7
    {
      platforms: [
        {x:0,y:360,width:800,height:40},
        {x:100,y:300,width:60,height:10},
        {x:250,y:260,width:60,height:10},
        {x:400,y:220,width:60,height:10},
        {x:550,y:180,width:60,height:10}
      ],
      coins: [
        {x:110,y:270,collected:false},
        {x:260,y:230,collected:false},
        {x:410,y:190,collected:false},
        {x:560,y:150,collected:false}
      ],
      enemies: [
        {x:350,y:330,width:30,height:30,dir:1,speed:1.4},
        {x:500,y:330,width:30,height:30,dir:-1,speed:1.6}
      ],
      boss: null
    },
    // Fase 8
    {
      platforms: [
        {x:0,y:360,width:800,height:40},
        {x:130,y:310,width:100,height:10},
        {x:380,y:270,width:100,height:10},
        {x:630,y:230,width:100,height:10}
      ],
      coins: [
        {x:140,y:280,collected:false},
        {x:390,y:240,collected:false},
        {x:640,y:200,collected:false}
      ],
      enemies: [
        {x:300,y:330,width:30,height:30,dir:1,speed:1.7},
        {x:580,y:330,width:30,height:30,dir:-1,speed:1.4}
      ],
      boss: null
    },
    // Fase 9
    {
      platforms: [
        {x:0,y:360,width:800,height:40},
        {x:200,y:310,width:70,height:10},
        {x:350,y:270,width:70,height:10},
        {x:500,y:230,width:70,height:10},
        {x:650,y:190,width:70,height:10}
      ],
      coins: [
        {x:210,y:280,collected:false},
        {x:360,y:240,collected:false},
        {x:510,y:200,collected:false},
        {x:660,y:160,collected:false}
      ],
      enemies: [
        {x:320,y:330,width:30,height:30,dir:1,speed:1.8},
        {x:470,y:330,width:30,height:30,dir:-1,speed:1.3}
      ],
      boss: null
    },
    // Fase 10 - Chefe
    {
      platforms: [
        {x:0,y:360,width:800,height:40},
        {x:150,y:300,width:80,height:10},
        {x:350,y:260,width:120,height:10},
        {x:600,y:220
